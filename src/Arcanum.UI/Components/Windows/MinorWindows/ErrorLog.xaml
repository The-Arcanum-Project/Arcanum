<styleClasses:BaseWindow x:Class = "Arcanum.UI.Components.Windows.MinorWindows.ErrorLog"
                         xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x = "http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc = "http://schemas.openxmlformats.org/markup-compatibility/2006"
                         xmlns:d = "http://schemas.microsoft.com/expression/blend/2008"
                         xmlns:styleClasses = "clr-namespace:Arcanum.UI.Components.StyleClasses"
                         xmlns:userControls = "clr-namespace:Arcanum.UI.Components.UserControls"
                         xmlns:dig = "clr-namespace:Arcanum.Core.CoreSystems.ErrorSystem.Diagnostics;assembly=Arcanum.Core"
                         xmlns:converters = "clr-namespace:Arcanum.UI.Components.Converters" mc:Ignorable = "d"
                         Title = "ErrorLog" Height = "600" Width = "1400"
                         Background = "{StaticResource DefaultBackColorBrush}" WindowStartupLocation = "CenterScreen">

    <styleClasses:BaseWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
                    Source = "/Arcanum_UI;component/Components/Styles/Specific/DataTemplate/DiagnosticTemplate.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <converters:BoolToVisibilityConverter x:Key = "BoolToVisibilityConverter" />
        </ResourceDictionary>
    </styleClasses:BaseWindow.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height = "30" />
            <RowDefinition Height = "*" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width = "*" MinWidth = "300" />
            <ColumnDefinition Width = "7" /> <!-- Spacer for a splitter-->
            <ColumnDefinition Width = "500" MinWidth = "200" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Row = "0" Grid.ColumnSpan = "3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width = "*" MinWidth = "300" />
                <ColumnDefinition Width = "*" />
                <ColumnDefinition Width = "*" />
                <ColumnDefinition Width = "*" />
                <ColumnDefinition Width = "*" />
                <ColumnDefinition Width = "400" />
                <ColumnDefinition Width = "200" />
            </Grid.ColumnDefinitions>

            <DockPanel Grid.Column = "0" Margin = "3, 0, 0, 0">
                <TextBlock DockPanel.Dock = "Left" VerticalAlignment = "Center">
                    Mod Errors:
                </TextBlock>
                <TextBlock DockPanel.Dock = "Left" VerticalAlignment = "Center" Margin = "3, 0, 0, 0"
                           Text = "{Binding ModErrorCount, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                           MinWidth = "30" />
                <TextBlock DockPanel.Dock = "Left" VerticalAlignment = "Center">
                    Vanilla Errors:
                </TextBlock>
                <TextBlock DockPanel.Dock = "Left" VerticalAlignment = "Center" Margin = "3, 0, 0, 0" MinWidth = "30"
                           Text = "{Binding VanillaErrorCount, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}" />
                <TextBlock DockPanel.Dock = "Left" VerticalAlignment = "Center">
                    Base Mod Errors:
                </TextBlock>
                <TextBlock DockPanel.Dock = "Left" VerticalAlignment = "Center" Margin = "3, 0, 0, 0" MinWidth = "30"
                           Text = "{Binding BaseModErrorCount, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}" />
            </DockPanel>

            <CheckBox Grid.Column = "1" x:Name = "ErrorCheckBox" HorizontalAlignment = "Center"
                      Checked = "CheckBox_OnClick" Unchecked = "CheckBoxUnCheck_OnClick">
                Error
            </CheckBox>
            <CheckBox Grid.Column = "2" x:Name = "WarningCheckBox" HorizontalAlignment = "Center"
                      Checked = "CheckBox_OnClick" Unchecked = "CheckBoxUnCheck_OnClick">
                Warning
            </CheckBox>
            <CheckBox Grid.Column = "3" x:Name = "InformationCheckBox" HorizontalAlignment = "Center"
                      Checked = "CheckBox_OnClick" Unchecked = "CheckBoxUnCheck_OnClick">
                Information
            </CheckBox>

            <CheckBox Grid.Column = "4" x:Name = "VanillaErrors" HorizontalAlignment = "Center"
                      Content = "Vanilla Errors" IsChecked = "True" Checked = "VanillaFilter_OnToggle"
                      Unchecked = "VanillaFilter_OnToggle">
            </CheckBox>

            <userControls:SearchTextBox Grid.Column = "5" x:Name = "SearchTextBox" ShowTextUnderline = "True">

            </userControls:SearchTextBox>

            <ComboBox Grid.Column = "6" x:Name = "FilterComboBox" Margin = "4">
            </ComboBox>


        </Grid>


        <GridSplitter Grid.Row = "1" Grid.Column = "1" Width = "3" Margin = "0, 4" HorizontalAlignment = "Center"
                      VerticalAlignment = "Stretch" ResizeBehavior = "PreviousAndNext">

        </GridSplitter>

        <!-- Second row -->

        <DataGrid Grid.Row = "1" Grid.Column = "0" x:Name = "ErrorLogDataGrid" AutoGenerateColumns = "False"
                  SelectedCellsChanged = "ErrorLogListView_OnSelectionChanged" IsReadOnly = "True">

            <DataGrid.Columns>
                <!-- Severity Icon Column -->
                <DataGridTemplateColumn Header = "Severity" Width = "50" CanUserReorder = "True" CanUserResize = "True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate DataType = "{x:Type dig:Diagnostic}">
                            <Border CornerRadius = "4" HorizontalAlignment = "Center" Margin = "0,1">
                                <Border.Style>
                                    <Style TargetType = "Border">
                                        <Setter Property = "Background" Value = "Transparent" />
                                        <Style.Triggers>
                                            <DataTrigger Binding = "{Binding Severity}" Value = "Error">
                                                <Setter Property = "Background"
                                                        Value = "{StaticResource DimErrorRedColorBrush}" />
                                            </DataTrigger>
                                            <DataTrigger Binding = "{Binding Severity}" Value = "Warning">
                                                <Setter Property = "Background"
                                                        Value = "{StaticResource DimWarningYellowColorBrush}" />
                                            </DataTrigger>
                                            <DataTrigger Binding = "{Binding Severity}" Value = "Information">
                                                <Setter Property = "Background"
                                                        Value = "{StaticResource DimInformationBlueColorBrush}" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>

                                <Image Width = "16" Height = "16" VerticalAlignment = "Center"
                                       HorizontalAlignment = "Center">
                                    <Image.Style>
                                        <Style TargetType = "Image">
                                            <Setter Property = "Source"
                                                    Value = "/Arcanum_UI;component/Assets/Icons/16x16/InfoCircle16x16.png" />
                                            <Style.Triggers>
                                                <DataTrigger Binding = "{Binding Severity}" Value = "Error">
                                                    <Setter Property = "Source"
                                                            Value = "/Arcanum_UI;component/Assets/Icons/16x16/CloseCircle16x16.png" />
                                                </DataTrigger>
                                                <DataTrigger Binding = "{Binding Severity}" Value = "Warning">
                                                    <Setter Property = "Source"
                                                            Value = "/Arcanum_UI;component/Assets/Icons/16x16/DangerCircle16x16.png" />
                                                </DataTrigger>
                                                <DataTrigger Binding = "{Binding Severity}" Value = "Information">
                                                    <Setter Property = "Source"
                                                            Value = "/Arcanum_UI;component/Assets/Icons/16x16/InfoCircle16x16.png" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn Header = "Error Code" Binding = "{Binding (dig:Diagnostic.Code)}" Width = "250"
                                    CanUserReorder = "True" CanUserResize = "True" />

                <DataGridTextColumn Header = "Action" Binding = "{Binding (dig:Diagnostic.Action)}" Width = "450"
                                    CanUserReorder = "True" CanUserResize = "True" />

                <DataGridTextColumn Header = "Message" Binding = "{Binding (dig:Diagnostic.Message)}" Width = "*"
                                    CanUserReorder = "True" CanUserResize = "True" />
            </DataGrid.Columns>


        </DataGrid>

        <Border Grid.Column = "2" Grid.Row = "1" Background = "{StaticResource LightBackColorBrush}" CornerRadius = "6"
                Margin = "4">
            <Grid Margin = "0">
                <Grid.RowDefinitions>
                    <RowDefinition Height = "40" />
                    <RowDefinition Height = "35*" />
                    <RowDefinition Height = "35*" />
                    <RowDefinition Height = "30*" />
                    <RowDefinition Height = "30" />
                </Grid.RowDefinitions>

                <Grid Grid.Row = "0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width = "40" />
                        <ColumnDefinition Width = "*" />
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column = "0" Grid.ColumnSpan = "2" Opacity = "0.2" Margin = "2" CornerRadius = "15">

                        <Border.Style>
                            <Style TargetType = "Border">
                                <Setter Property = "Background" Value = "{StaticResource DefaultBackColorBrush}" />
                                <Style.Triggers>
                                    <DataTrigger
                                        Binding = "{Binding SelectedSeverity, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                        Value = "Error">
                                        <Setter Property = "Background"
                                                Value = "{StaticResource DimErrorRedColorBrush}" />
                                    </DataTrigger>
                                    <DataTrigger
                                        Binding = "{Binding SelectedSeverity, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                        Value = "Warning">
                                        <Setter Property = "Background"
                                                Value = "{StaticResource DimWarningYellowColorBrush}" />
                                    </DataTrigger>
                                    <DataTrigger
                                        Binding = "{Binding SelectedSeverity, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                        Value = "Information">
                                        <Setter Property = "Background"
                                                Value = "{StaticResource DimInformationBlueColorBrush}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>

                    <Image Grid.Column = "0" Width = "35" Height = "35" Margin = "0,0,0,0" VerticalAlignment = "Center"
                           HorizontalAlignment = "Center" Stretch = "UniformToFill">

                        <Image.Style>
                            <Style TargetType = "Image">
                                <Setter Property = "Source"
                                        Value = "/Arcanum_UI;component/Assets/Icons/16x16/InfoCircle16x16.png" />
                                <Style.Triggers>
                                    <DataTrigger
                                        Binding = "{Binding SelectedSeverity, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                        Value = "Error">
                                        <Setter Property = "Source"
                                                Value = "/Arcanum_UI;component/Assets/Icons/40x40/CloseCircle40x40.png" />
                                    </DataTrigger>
                                    <DataTrigger
                                        Binding = "{Binding SelectedSeverity, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                        Value = "Warning">
                                        <Setter Property = "Source"
                                                Value = "/Arcanum_UI;component/Assets/Icons/40x40/DangerCircle40x40.png" />
                                    </DataTrigger>
                                    <DataTrigger
                                        Binding = "{Binding SelectedSeverity, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                        Value = "Information">
                                        <Setter Property = "Source"
                                                Value = "/Arcanum_UI;component/Assets/Icons/40x40/InfoCircle40x40.png" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                    </Image>

                    <TextBlock Grid.Column = "1"
                               Text = "{Binding ErrorName, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                               VerticalAlignment = "Center" FontSize = "16" Margin = "10,0,0,0" />
                </Grid>

                <styleClasses:CorneredTextBox Grid.Row = "1"
                                              Text = "{Binding ErrorMessage, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                              VerticalAlignment = "Stretch" VerticalContentAlignment = "Top"
                                              FontSize = "12" Margin = "4, 2" TextWrapping = "Wrap"
                                              Background = "{StaticResource DefaultBackColorBrush}"
                                              CornerRadiusValue = "4" IsReadOnly = "True" />

                <styleClasses:CorneredTextBox Grid.Row = "2"
                                              Text = "{Binding ErrorDescription, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                              VerticalAlignment = "Stretch" VerticalContentAlignment = "Top"
                                              FontSize = "12" Margin = "4, 2" TextWrapping = "Wrap"
                                              Background = "{StaticResource DefaultBackColorBrush}"
                                              CornerRadiusValue = "4" IsReadOnly = "True" />

                <styleClasses:CorneredTextBox Grid.Row = "3"
                                              Text = "{Binding FileProbe, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                              VerticalAlignment = "Stretch" VerticalContentAlignment = "Top"
                                              FontSize = "14" Margin = "4, 2" TextWrapping = "Wrap"
                                              CornerRadiusValue = "4" IsReadOnly = "True" />

                <TextBlock Grid.Row = "3" x:Name = "ProbeTextBlock" Margin = "15, 0, 0, 0" TextWrapping = "Wrap"
                           TextAlignment = "Left" VerticalAlignment = "Center" HorizontalAlignment = "Left">
                </TextBlock>

                <TextBlock Grid.Row = "3"
                           Visibility = "{Binding DontProbeForFiles, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}, Converter={StaticResource BoolToVisibilityConverter}}"
                           TextAlignment = "Center" VerticalAlignment = "Center" HorizontalAlignment = "Center"
                           Opacity = "0.7">
                    Probing files disabled in settings. &#10;No Error preview available.
                </TextBlock>

                <Grid Grid.Row = "4" Margin = "4, 2">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width = "*" />
                        <ColumnDefinition Width = "30" />
                        <ColumnDefinition Width = "30" />
                        <ColumnDefinition Width = "30" />
                    </Grid.ColumnDefinitions>

                    <styleClasses:CorneredTextBox Grid.Column = "0" IsReadOnly = "True"
                                                  Text = "{Binding SelectedPath, RelativeSource={RelativeSource AncestorType=styleClasses:BaseWindow}}"
                                                  FontSize = "11" VerticalAlignment = "Stretch" BorderThickness = "0"
                                                  VerticalContentAlignment = "Center" Margin = "0, 0, 2, 0"
                                                  CornerRadiusValue = "4">
                    </styleClasses:CorneredTextBox>

                    <styleClasses:BaseButton Grid.Column = "1" MouseUp = "ExportToCsv_OnClick"
                                             ToolTip = "Export the error log to a .csv file&#10;RMB to export and open the file"
                                             Margin = "2, 0" BorderBrush = "{StaticResource DefaultBackColorBrush}">
                        <Image Source = "/Arcanum_UI;component/Assets/Icons/20x20/ExportAsCsv20x20.png" Width = "20"
                               Height = "20">
                        </Image>
                    </styleClasses:BaseButton>

                    <styleClasses:BaseButton Grid.Column = "2" Click = "ButtonBase_OnClick"
                                             ToolTip = "Open folder of selected faulty file" Margin = "2, 0"
                                             BorderBrush = "{StaticResource DefaultBackColorBrush}">
                        <Image Source = "/Arcanum_UI;component/Assets/Icons/20x20/FolderOpen20x20.png" Width = "20"
                               Height = "20">
                        </Image>
                    </styleClasses:BaseButton>

                    <styleClasses:BaseButton Grid.Column = "3" Margin = "2, 0" Click = "OpenFileAtPos_OnClick"
                                             ToolTip = "Open file at error position"
                                             BorderBrush = "{StaticResource DefaultBackColorBrush}"
                                             MouseDown = "UIElement_OnMouseDown">
                        <Image Source = "/Arcanum_UI;component/Assets/Icons/20x20/File20x20.png" Width = "20"
                               Height = "20">
                        </Image>
                    </styleClasses:BaseButton>
                </Grid>

            </Grid>
        </Border>
    </Grid>
</styleClasses:BaseWindow>