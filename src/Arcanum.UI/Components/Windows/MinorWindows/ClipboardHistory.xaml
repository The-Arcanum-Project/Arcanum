<Window x:Class = "Arcanum.UI.Components.Windows.MinorWindows.ClipboardHistory"
        xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x = "http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d = "http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc = "http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:minorWindows = "clr-namespace:Arcanum.UI.Components.Windows.MinorWindows" mc:Ignorable = "d"
        Title = "Clipboard History" Height = "350" Width = "300" WindowStyle = "None" ResizeMode = "NoResize"
        AllowsTransparency = "True" Background = "Transparent" ShowInTaskbar = "False" Topmost = "True"
        WindowStartupLocation = "Manual">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source = "/Arcanum_UI;component/Assets/ArcanumShared/DefaultPalette.xaml" />
                <ResourceDictionary Source = "/Arcanum_UI;component/Assets/ArcanumShared/DefaultFonts.xaml" />
                <ResourceDictionary Source = "/Arcanum_UI;component/Components/Styles/Base/BaseButton.xaml" />
            </ResourceDictionary.MergedDictionaries>


            <!-- ListBox Item Style -->
            <Style x:Key = "HistoryItemStyle" TargetType = "ListBoxItem">
                <Setter Property = "Background" Value = "Transparent" />
                <Setter Property = "Padding" Value = "8,6" />
                <Setter Property = "BorderThickness" Value = "0" />
                <Setter Property = "Cursor" Value = "Hand" />
                <Setter Property = "Template">
                    <Setter.Value>
                        <ControlTemplate TargetType = "ListBoxItem">
                            <Border x:Name = "Bd" Background = "{StaticResource DarkerSelectedBackColorBrush}"
                                    BorderBrush = "{TemplateBinding BorderBrush}"
                                    BorderThickness = "{TemplateBinding BorderThickness}"
                                    Padding = "{TemplateBinding Padding}" CornerRadius = "4" Margin = "2,1">
                                <ContentPresenter HorizontalAlignment = "Stretch" VerticalAlignment = "Center" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property = "IsMouseOver" Value = "True">
                                    <Setter TargetName = "Bd" Property = "Background"
                                            Value = "{StaticResource LightBackColorBrush}" />
                                </Trigger>
                                <Trigger Property = "IsSelected" Value = "True">
                                    <Setter TargetName = "Bd" Property = "Background"
                                            Value = "{StaticResource DefaultBackColorBrush}" />
                                    <Setter TargetName = "Bd" Property = "BorderBrush"
                                            Value = "{StaticResource SelectedBackColorBrush}" />
                                    <Setter TargetName = "Bd" Property = "BorderThickness" Value = "2,0,0,0" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <!-- Main Container with Drop Shadow -->
    <Border Background = "{StaticResource DefaultBackColorBrush}"
            BorderBrush = "{StaticResource DefaultBorderColorBrush}" BorderThickness = "1" CornerRadius = "8"
            Padding = "0">
        <Border.Effect>
            <DropShadowEffect BlurRadius = "15" ShadowDepth = "5" Opacity = "0.4" Direction = "270" />
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height = "Auto" /> <!-- Title -->
                <RowDefinition Height = "*" />    <!-- List -->
                <RowDefinition Height = "Auto" /> <!-- Footer -->
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row = "0" Padding = "12,10" BorderBrush = "{StaticResource DefaultBorderColorBrush}"
                    BorderThickness = "0,0,0,1">
                <DockPanel>
                    <TextBlock Text = "Clipboard History" FontWeight = "SemiBold" FontSize = "12"
                               VerticalAlignment = "Center" HorizontalAlignment = "Center" />
                </DockPanel>
            </Border>

            <!-- The Content List -->
            <!-- Bind ItemsSource to your ViewModel's ClipboardHistoryList -->
            <ListBox Grid.Row = "1" x:Name = "HistoryList" Background = "Transparent" BorderThickness = "0"
                     ScrollViewer.HorizontalScrollBarVisibility = "Disabled"
                     ItemContainerStyle = "{StaticResource HistoryItemStyle}"
                     PreviewMouseLeftButtonUp = "HistoryList_PreviewMouseLeftButtonUp">

                <ListBox.ItemTemplate>
                    <DataTemplate DataType = "minorWindows:ClipboardEntry">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width = "3*" />
                                <ColumnDefinition Width = "5*" />
                            </Grid.ColumnDefinitions>

                            <!-- Col 0: Type Badge -->
                            <Border Grid.Column = "0" Background = "Transparent" CornerRadius = "3" Padding = "4,1"
                                    VerticalAlignment = "Top" Margin = "0,2,8,0">
                                <TextBlock Text = "{Binding ObjectType}" FontSize = "10" FontWeight = "Bold"
                                           TextAlignment = "Center" />
                            </Border>

                            <!-- Col 1: Data -->
                            <StackPanel Grid.Column = "1">
                                <!-- Property Name -->
                                <TextBlock Text = "{Binding PropertyName}" FontSize = "11" Margin = "0,0,0,2" />

                                <!-- Value (Truncated if too long) -->
                                <TextBlock Text = "{Binding Value}" FontSize = "13" FontWeight = "Normal"
                                           TextTrimming = "CharacterEllipsis" MaxHeight = "36" />
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <!-- Footer / Hint -->
            <Border Grid.Row = "2" Padding = "8" Background = "{StaticResource DefaultBackColorBrush}"
                    CornerRadius = "0,0,8,8">
                <TextBlock Text = "Click to paste • Esc to close" FontSize = "10" HorizontalAlignment = "Center" />
            </Border>
        </Grid>
    </Border>
</Window>