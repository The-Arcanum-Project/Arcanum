<Window x:Class = "Arcanum.UI.Components.Windows.PopUp.SavingSplashScreen"
        xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x = "http://schemas.microsoft.com/winfx/2006/xaml" Title = "Saving..." Height = "150" Width = "400"
        WindowStartupLocation = "CenterOwner" ResizeMode = "NoResize" WindowStyle = "None" ShowInTaskbar = "False"
        Background = "Transparent" AllowsTransparency = "True">


    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source = "/Arcanum_UI;component/Assets/ArcanumShared/DefaultPalette.xaml" />
                <ResourceDictionary Source = "/Arcanum_UI;component/Components/Styles/Base/BaseButton.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key = "ModernProgressBarStyle" TargetType = "{x:Type ProgressBar}">
                <Setter Property = "Foreground" Value = "{StaticResource GreenColorBrush}" />
                <Setter Property = "Background" Value = "{StaticResource DefaultBackColorBrush}" />
                <Setter Property = "BorderBrush" Value = "{StaticResource DefaultBorderColorBrush}" />
                <Setter Property = "BorderThickness" Value = "2" />
                <Setter Property = "Height" Value = "20" />
                <Setter Property = "Template">
                    <Setter.Value>
                        <ControlTemplate TargetType = "{x:Type ProgressBar}">
                            <Grid x:Name = "TemplateRoot" SnapsToDevicePixels = "True">
                                <Border x:Name = "PART_Track" Background = "{TemplateBinding Background}"
                                        CornerRadius = "4">

                                    <Border.OpacityMask>
                                        <VisualBrush Stretch = "None" AlignmentX = "Left" AlignmentY = "Top">
                                            <VisualBrush.Visual>
                                                <Border Background = "#000000" CornerRadius = "4"
                                                        Width = "{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ProgressBar}}"
                                                        Height = "{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=ProgressBar}}" />
                                            </VisualBrush.Visual>
                                        </VisualBrush>
                                    </Border.OpacityMask>

                                    <Grid ClipToBounds = "True">
                                        <Border x:Name = "PART_Indicator" Background = "{TemplateBinding Foreground}"
                                                HorizontalAlignment = "Left" />

                                        <Border x:Name = "IndeterminateHighlight" HorizontalAlignment = "Left"
                                                Width = "100" Background = "{TemplateBinding Foreground}"
                                                Visibility = "Collapsed" Opacity = "0.8">
                                            <Border.RenderTransform>
                                                <TranslateTransform x:Name = "IndeterminateTransform" X = "-100" />
                                            </Border.RenderTransform>
                                        </Border>
                                    </Grid>
                                </Border>
                                <Border BorderBrush = "{TemplateBinding BorderBrush}"
                                        BorderThickness = "{TemplateBinding BorderThickness}"
                                        Background = "Transparent" CornerRadius = "4" />
                            </Grid>

                            <ControlTemplate.Triggers>
                                <Trigger Property = "IsIndeterminate" Value = "True">
                                    <Setter TargetName = "PART_Indicator" Property = "Visibility" Value = "Collapsed" />
                                    <Setter TargetName = "IndeterminateHighlight" Property = "Visibility"
                                            Value = "Visible" />

                                    <Trigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior = "Forever">
                                                <DoubleAnimation Storyboard.TargetName = "IndeterminateTransform"
                                                                 Storyboard.TargetProperty = "X" From = "-100"
                                                                 To = "800" Duration = "0:0:1.5" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </Trigger.EnterActions>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Border BorderBrush = "{StaticResource BlueAccentColorBrush}" BorderThickness = "2" CornerRadius = "8"
            Background = "{StaticResource DefaultBackColorBrush}">
        <Grid Margin = "20" Background = "{StaticResource DefaultBackColorBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height = "Auto" />
                <RowDefinition Height = "*" />
                <RowDefinition Height = "Auto" />
            </Grid.RowDefinitions>

            <!-- Title -->
            <TextBlock Text = "Saving is in progress..." Foreground = "{StaticResource DefaultForeColorBrush}"
                       FontSize = "18" FontWeight = "Bold" HorizontalAlignment = "Center" />

            <!-- Current File Name -->
            <TextBlock x:Name = "CurrentFileText" Grid.Row = "1" Text = "Initializing..."
                       Foreground = "{StaticResource DefaultForeColorBrush}" VerticalAlignment = "Center"
                       HorizontalAlignment = "Center" TextTrimming = "CharacterEllipsis" FontSize = "14" />

            <!-- Progress Bar -->
            <ProgressBar x:Name = "SaveProgressBar" Grid.Row = "2" Height = "20" Minimum = "0"
                         Style = "{StaticResource ModernProgressBarStyle}" />
        </Grid>
    </Border>
</Window>