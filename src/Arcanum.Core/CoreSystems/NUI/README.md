# NUI (Navigation User Interface)

### Abstract

NUI (Navigation User Interface) is a core system designed to facilitate user navigation between different objects within
the application.

## Components

### INUI

```c#
public interface INUI : INexus, INotifyPropertyChanged
{
   [IgnoreModifiable]
   public bool IsReadonly { get; }
   [IgnoreModifiable]
   public NUISetting Settings { get; }
   [IgnoreModifiable]
   public INUINavigation[] Navigations { get; }
}
```

`INUI` requires the implementation of the `INexus` [Nexus Documentation](../../../Nexus.Core/README.md) interface as
well as `INotifyPropertyChanged`.

Any Object that implements this interface can be used as a navigation point in the NUI system or as a source for
navigation points.

### INUINavigation

```c#
public interface INUINavigation
{
   public INUI Target { get; }
   public string ToolStripString { get; }
}
```

`INUINavigation` represents a navigation point that links to a target `INUI` object. It includes a `ToolStripString`
property for display purposes.

### NUISetting

```c#
public class NUISetting(Enum title,
                        Enum[] viewFields,
                        Enum[] embeddedFields,
                        Enum[] shortInfoFields)
{
   public Enum Title { get; set; } = title;

   public Enum[] ViewFields { get; set; } = viewFields;

   public Enum[] EmbeddedFields { get; set; } = embeddedFields;

   public Enum[] ShortInfoFields { get; set; } = shortInfoFields;
   public bool InferActionsInEmbedded { get; set; } = true;
}
```

Each `INUI` object has an associated `NUISetting` that defines how the object should be displayed in the navigation
interface. Each enum property corresponds to a field in the object generated by the `INexus` code generation.

There are **3** display modes:

- **View Mode**: Displays detailed information about the object using the fields specified in `ViewFields`. The title of
  the view is specified by the `Title` property.
- **Embedded Mode**: Displays a compact view of the object using the fields specified in `EmbeddedFields`.
- **Short Info Mode**: Displays a brief summary (one liner) of the object using the fields specified in
  `ShortInfoFields`.

### ToStringArgumentsAttribute

```c#
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field)]
public sealed class ToStringArgumentsAttribute(string format) : Attribute
{
   public string Format { get; } = format;
}
```

The `ToStringArgumentsAttribute` can be applied to properties or fields to specify a custom format for the `ToString`
method which is used by the NUI system to generate display strings.

### ToStringArgumentsAttribute

This attribute can be applied to properties to specify that they should be treated as read-only in the NUI system.

```c#
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field)]
public class ReadonlyNexus : Attribute;
```

### DisableMapInferAttribute

```c#
    [AttributeUsage(AttributeTargets.Property | AttributeTargets.Field)]
    public sealed class DisableMapInferActionsAttribute : Attribute { }
```

If this attribute is applied to a property or field, the NUI system will not attempt to infer mapping actions for that
property or field when generating views.

### NUINavHistory

```c#
public class NUINavHistory
{
   public INUI Target { get; }
   public bool GenerateSubViews { get; }
   public ContentPresenter Root { get; }
}
```

`NUINavHistory` represents a navigation history entry, storing the target `INUI` object, a flag indicating whether to
generate subviews, and a reference to the root `ContentPresenter`.

### NUIViewGenerator

```c#
public static class NUIViewGenerator
{
   public static void GenerateAndSetView(NUINavHistory navHistory)
   {
   }

   public static UserControl GenerateView(NUINavHistory navHistory)
   {
   }
}
```

`NUIViewGenerator` is a static class responsible for generating views based on the provided `NUINavHistory`. It includes
methods to generate and set views as well as to generate views independently.

The only two public methods are `GenerateAndSetView` and `GenerateView` with `GenerateAndSetView` being a convenience
method that calls `GenerateView` and sets the generated view to the `ContentPresenter` in the `NUINavHistory`.

Any UI element that wants to display an `INUI` object can use these methods to generate the appropriate view based on
the object's settings.

### InferActionsButtons

```c#
public interface IMapInferable<T> : IHasMapMode
{
   public static abstract List<T> GetInferredList(IEnumerable<Location> sLocs);
}
```

`IMapInferable<T>` is an interface that can be implemented by classes that want to provide inferred mapping actions. It
includes a static abstract method `GetInferredList` that takes a collection of `Location` objects and returns a list of
inferred actions of type `T`.

The provided Locations are always the current selection on the map. Thus this interfaces is used to generate up to 3 of
these for 4 buttons for any type displayed in NUI that implements this interface:

- 'M' sets the mapmode to the one of the property/field type
- 'A' adds the inferred list to the current selection
- 'R' removes the inferred list from the current selection
- 'S' (only available for non collection properties/fields) sets the selection to the inferred value, does not work if
  more than one are selected
